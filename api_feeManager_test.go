package relysia

import (
	"encoding/json"
	"testing"

	"github.com/stretchr/testify/assert"
)

var feeMetricsResponse string = `{"statusCode":200,"data":{"msg":"Operation Completed successfully","status":"success","totalBalance":{"balance":40086604},"feeUtxos":{"0":[{"height":719772,"tx_pos":2,"tx_hash":"564cbd9da26c44a14b7147616b88d166d02a0631e58ee7624916ec32a0cc0a17","value":211870,"script":"76a914d3d4eaa9c41b429d885f1352fbf767c3cbfa062788ac"},{"height":719772,"tx_pos":2,"tx_hash":"927bb2fb4f5024e4d81dfb69d483ba7b38a3d65b08e0f9b6edfe68ff45039b88","value":6150,"script":"76a914d3d4eaa9c41b429d885f1352fbf767c3cbfa062788ac"},{"height":720523,"tx_pos":3,"tx_hash":"a7dd3f373eebcc6ae51fe74429114b2c086930d547432b4828b2b5d8344af72e","value":4757200,"script":"76a914d3d4eaa9c41b429d885f1352fbf767c3cbfa062788ac"},{"height":720523,"tx_pos":1,"tx_hash":"6e9a7a20f118dc69e851a58b4c2bd41e2a393497c234e2c6e08233ed93567b77","value":3323,"script":"76a914d3d4eaa9c41b429d885f1352fbf767c3cbfa062788ac"},{"height":720523,"tx_pos":1,"tx_hash":"d9e4a51707098fb86bf10d17e0d51cf305af9a05e036d30214c38e1631453df0","value":3105,"script":"76a914d3d4eaa9c41b429d885f1352fbf767c3cbfa062788ac"},{"height":720765,"tx_pos":2,"tx_hash":"7f3bab7bca9ee4ae777d577a0d345009ee7b1d4fa8dadff67ced32f49caa1f4f","value":6436,"script":"76a914d3d4eaa9c41b429d885f1352fbf767c3cbfa062788ac"},{"height":720865,"tx_pos":2,"tx_hash":"0f30095cad35f2e379531ac205127b2a751949e334b293fd89a4daae7b2281e9","value":8995,"script":"76a914d3d4eaa9c41b429d885f1352fbf767c3cbfa062788ac"},{"height":720870,"tx_pos":2,"tx_hash":"89fc0364d071b24c73512e8ad41429b8ce19e6865fee1834297f39f7232cd4f9","value":308647,"script":"76a914d3d4eaa9c41b429d885f1352fbf767c3cbfa062788ac"},{"height":720870,"tx_pos":2,"tx_hash":"a247c6e3c99ee0169ecd5a24b4e467d058375462a1a0b0f942280b1c5fe148ac","value":6152,"script":"76a914d3d4eaa9c41b429d885f1352fbf767c3cbfa062788ac"},{"height":720870,"tx_pos":1,"tx_hash":"48ed2ba722f136e5e18f393643477fc901d03214732868c96154de0949d13774","value":2275,"script":"76a914d3d4eaa9c41b429d885f1352fbf767c3cbfa062788ac"},{"height":720895,"tx_pos":1,"tx_hash":"b92d35ba4ee5f08538ec5aa371666186f2cec5f85892a2faa3c782a49de543e4","value":3323,"script":"76a914d3d4eaa9c41b429d885f1352fbf767c3cbfa062788ac"},{"height":720895,"tx_pos":1,"tx_hash":"85961c2654ad07a265d6bc58f338ce7be56384d8ca638ab89308599917dec985","value":3105,"script":"76a914d3d4eaa9c41b429d885f1352fbf767c3cbfa062788ac"}],"1":[{"height":719103,"tx_pos":2,"tx_hash":"0c14d90dacfb5f5c861e58ec8412ac8727b15aae277cbeb66eef70c69e3b96f9","value":740514,"script":"76a91464d5e305b5a7c9b282d58527227b79b31236ef7d88ac"},{"height":720870,"tx_pos":2,"tx_hash":"73d9d4b89342a095bbb4ab457ecc570e1724a250debd6704d036e78c7f4ffdb0","value":1836243,"script":"76a91464d5e305b5a7c9b282d58527227b79b31236ef7d88ac"},{"height":720870,"tx_pos":1,"tx_hash":"fd9a68a877ec2908531a5c5b16901fdcbbe4a244f34ac6aea6f6ff49a596d203","value":1963676,"script":"76a91464d5e305b5a7c9b282d58527227b79b31236ef7d88ac"},{"height":720895,"tx_pos":3,"tx_hash":"0868eb2f539f7432e1cdd16c8fca70be5c73805de971c3dd7db09da81608836e","value":1821898,"script":"76a91464d5e305b5a7c9b282d58527227b79b31236ef7d88ac"},{"height":721085,"tx_pos":2,"tx_hash":"2b17e02e79d997c64499ffbe568f5b5d4516b767996364776698771bd9e51bd8","value":1781318,"script":"76a91464d5e305b5a7c9b282d58527227b79b31236ef7d88ac"},{"height":721144,"tx_pos":2,"tx_hash":"f8b944625273c6d1c4ac19f6a2ed8ea49060fb15214f58d6ff073e387afb34e4","value":1760492,"script":"76a91464d5e305b5a7c9b282d58527227b79b31236ef7d88ac"},{"height":721145,"tx_pos":2,"tx_hash":"155f7c164b22a0353d8a215d8294fe5955bc72ec1d51e92999af6a52dc57ae9d","value":4952641,"script":"76a91464d5e305b5a7c9b282d58527227b79b31236ef7d88ac"}],"2":[{"height":715402,"tx_pos":0,"tx_hash":"5aa7ffd8d5bbf461df8f004b39c990811c023f46e2a45a5aaaafb64b9ed2f271","value":5000000,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":715402,"tx_pos":2,"tx_hash":"5aa7ffd8d5bbf461df8f004b39c990811c023f46e2a45a5aaaafb64b9ed2f271","value":5976,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":715402,"tx_pos":2,"tx_hash":"734987494fc31adeea764f0d98554780dd703d3cf009abbc7aa8b054d74612b2","value":1999541,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":715777,"tx_pos":2,"tx_hash":"4cd2431bd9cb26e5866edc0e83071b13518a02a020bd9253007425c85a09d6b4","value":1801126,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":715777,"tx_pos":2,"tx_hash":"a03c03b0fdb254426967937dad92319ced3405448fc7b39997c4dfa5fd3b031c","value":5795,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":715777,"tx_pos":2,"tx_hash":"be26a34b7d26cb36405a10f946ad719ada7a9d22b8b2920a4ea6326cce688720","value":571119,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":715783,"tx_pos":2,"tx_hash":"0794f1181c367111a09b8547707709bac595c1c06e5bd03084a6c97e16f20b2d","value":6702,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":715826,"tx_pos":2,"tx_hash":"b24fff0a5d70d2b824fedb44b8c39d5987c9beed488ccadb8323aa914892117a","value":6702,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":715902,"tx_pos":2,"tx_hash":"30fa9582fe4258d4a186741435d574fa535a32633bf6d30797484683e98b5bef","value":4989,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":716031,"tx_pos":0,"tx_hash":"dc4390f18bc32ae1ca130c08297bb7952de33470c6bd1973f67cfe1b91f32da9","value":4000,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":716031,"tx_pos":1,"tx_hash":"b23c13b96f216173c4755e82930c1885ee5d68d3ed2a8675b8217a6ecf1f312c","value":2275,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":716716,"tx_pos":2,"tx_hash":"3e10cd5b60f44c6c595edfdd1e5f042f8d5b4edb600d03db2a9c6b928c7ee319","value":1794522,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":716718,"tx_pos":2,"tx_hash":"5b417c1c294ce51eaa1b77e90c9194cb5be84512d5608756780904893358c238","value":6515,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":717922,"tx_pos":1,"tx_hash":"39e19d5df277ff440cf3bf0a239e53b9bcf87fbb581fd988593aaf19f331a923","value":2270,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":717922,"tx_pos":1,"tx_hash":"88df2dabf977b794fdbaac459fc29d9a0a43280379110e052080c386f0393076","value":2270,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":717924,"tx_pos":0,"tx_hash":"97788ab479def4abf4ccdc23bf21bc66c0c445c99c84bf5baf0c46e64ee4a840","value":4000,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":717925,"tx_pos":1,"tx_hash":"de21ada94fc0ce54d4911d1761c90e68dac2525e15e554ddd680f3f3385a3086","value":2270,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":717929,"tx_pos":2,"tx_hash":"b845e77900dc4c599487bfd8cccdb82fff668fd2e5af693aea8d87f0f7e7c7f0","value":1537,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":717929,"tx_pos":3,"tx_hash":"2666fbaf6085573bc371a5de36cf1e14b900adf936986e89f85d374f9122ac97","value":1881730,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":717929,"tx_pos":1,"tx_hash":"f0318d25aaa2a6e4f16f9a6929af510338f0d1914b71d79336f6edf406375b21","value":1797342,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":717929,"tx_pos":1,"tx_hash":"f23462c6b19c0efb1f2ea93727fcaac9312b9e9d7ed31f9af1c77ad63462ead6","value":2270,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":717929,"tx_pos":1,"tx_hash":"c222e54cecb19fc5d1e80a207671805a7c1ecde8f7f2338a5dadf72e27a23e42","value":4995887,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":717929,"tx_pos":1,"tx_hash":"7acdc9a184f77c847763ee3fe5a2d6a02c624532808770a4ca8a0b778752572c","value":2270,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":717929,"tx_pos":1,"tx_hash":"5690f89f4e9e1e2bfd48b96fcfe2884d5c4f504ced46863603a1c0c9bb40e061","value":5863,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"},{"height":717929,"tx_pos":1,"tx_hash":"43ba63a79be1073d6aff7b01105b0099aaf475ec188badb6ea7d0c764d868f1a","value":2270,"script":"76a91454f13a59073a0668f5119621e386a624696b355a88ac"}]}}}`

func TestFeeMetricsResponse(t *testing.T) {
	assert := assert.New(t)

	b := []byte(feeMetricsResponse)

	data := &FeeMetricsBetaResponse{}
	assert.Nil(json.Unmarshal(b, data))

	replica, err := json.Marshal(data)
	assert.Nil(err)

	assert.Equal(b, replica)

}
